{% extends "base.html" %}
{% block title %}Detalle de cita{% endblock %}

{% block content %}
<div class="card">
    <h1>Detalle de la cita</h1>
    <p class="form-sub">
        InformaciÃ³n completa de la cita seleccionada.
    </p>

    <div class="detalle-grid">
        <section>
            <h2>ğŸ¾ Paciente</h2>
            <p><strong>Nombre:</strong> {{ cita['mascota'] }}</p>
            <p><strong>Tipo:</strong> {{ cita['tipo_mascota'] }}</p>
        </section>

        <section>
            <h2>ğŸ‘¤ Responsable</h2>
            <p><strong>Nombre:</strong> {{ cita['dueno'] }}</p>
            <p><strong>TelÃ©fono:</strong> {{ cita['dueno_telefono'] }}</p>
            <p><strong>Correo:</strong> {{ cita['dueno_correo'] }}</p>
        </section>

        <section>
            <h2>ğŸ‘¨â€âš•ï¸ Veterinario</h2>
            <p><strong>Nombre:</strong> {{ cita['vet'] }}</p>
            <p><strong>Especialidad:</strong> {{ cita['vet_especialidad'] }}</p>
            <p><strong>TelÃ©fono:</strong> {{ cita['vet_telefono'] }}</p>
        </section>

        <section>
            <h2>ğŸ“… Cita</h2>
            {% set dt = cita['fecha_hora'] %}
            <p><strong>Fecha:</strong> {{ dt[8:10] }}/{{ dt[5:7] }}/{{ dt[0:4] }}</p>
            <p><strong>Hora:</strong> {{ dt[11:16] }}</p>
            <p><strong>Tipo de servicio:</strong> {{ cita['tipo_servicio'] }}</p>
            <p><strong>Estado:</strong> {{ cita['estado'] }}</p>
            <p>
                <strong>Nivel de urgencia:</strong>
                {% set urg = (cita['urgencia'] or '').lower() %}
                {% if urg == 'alta' %}
                    <span class="urg-tag urg-alta">ALTA</span>
                {% elif urg == 'media' %}
                    <span class="urg-tag urg-media">MEDIA</span>
                {% elif urg == 'baja' %}
                    <span class="urg-tag urg-baja">BAJA</span>
                {% else %}
                    <span class="urg-tag">N/A</span>
                {% endif %}
            </p>
        </section>
    </div>

    <div class="detalle-sintomas">
        <h2>SÃ­ntomas / motivo</h2>
        <div class="texto-sintomas">
            {% if cita['sintomas'] %}
                {{ cita['sintomas'] }}
            {% else %}
                <span class="symptoms-empty">Sin descripciÃ³n registrada.</span>
            {% endif %}
        </div>
    </div>

    <div class="form-actions" style="margin-top: 16px; justify-content: space-between;">
        <div>
            <a href="{{ url_for('citas') }}" class="btn btn-secondary">Volver a calendario</a>
        </div>
        <div>
            <a href="{{ url_for('cita_editar', cita_id=cita['id']) }}" class="btn btn-primary">Editar cita</a>
            <form action="{{ url_for('cita_eliminar', cita_id=cita['id']) }}"
                  method="post"
                  style="display:inline;"
                  onsubmit="return confirm('Â¿Seguro que deseas eliminar esta cita?');">
                <button type="submit" class="btn btn-secondary">Eliminar</button>
            </form>
        </div>
    </div>
</div>
{% endblock %}
